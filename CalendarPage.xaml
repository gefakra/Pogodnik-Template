<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:WeatherApp.ViewModels"
    x:Class="WeatherApp.CalendarPage"
    Title="ðŸ“† ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº"
    BackgroundColor="{DynamicResource PageBackgroundColor}" >

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="{DynamicResource BackgroundGradientStart}" Offset="0" />
            <GradientStop Color="{DynamicResource BackgroundGradientEnd}"   Offset="1" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ScrollView>

        <VerticalStackLayout Padding="15" Spacing="15">

            <!-- Ð’Ð°Ñˆ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚: ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð¸ ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº -->
            <VerticalStackLayout Padding="20" Spacing="15">

                <!-- Ð¡Ñ‚Ð¸Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ„Ñ€ÐµÐ¹Ð¼ Ñ DatePicker -->
                <Frame Style="{DynamicResource WeatherFrameStyle}"
               CornerRadius="12"
               HasShadow="True">
                    <DatePicker Date="{Binding SelectedDate}"
                      HorizontalOptions="Center"
                      Format="dddd, dd MMM yyyy"
                      TextColor="{DynamicResource TextColorSecondary}"
                      FontSize="18" />
                </Frame>

                <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð±Ð»Ð¾ÐºÐ° Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº -->
                <Label Text="Ð—Ð°Ð¼ÐµÑ‚ÐºÐ¸ Ð½Ð° Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ Ð´Ð°Ñ‚Ñƒ"
               FontAttributes="Bold"
               FontSize="16"
               TextColor="{DynamicResource TextColorSecondary}" />

                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº -->
                <CollectionView ItemsSource="{Binding Notes}"
                        EmptyView="ÐÐµÑ‚ Ð·Ð°Ð¼ÐµÑ‚Ð¾Ðº Ð½Ð° ÑÑ‚Ñƒ Ð´Ð°Ñ‚Ñƒ"
                        SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Style="{DynamicResource WeatherFrameStyle}"
                     BackgroundColor="{DynamicResource FrameBackgroundColor}"
                     CornerRadius="8"
                     HasShadow="True"
                     Padding="12"
                     Margin="0,5">
                                <VerticalStackLayout>
                                    <Label Text="{Binding Title}"
                         FontAttributes="Bold"
                         FontSize="16"
                         TextColor="{DynamicResource TextColorPrimary}" />
                                    <Label Text="{Binding NoteText}"
                         FontSize="14"
                         LineBreakMode="WordWrap"
                         TextColor="{DynamicResource TextColorSecondary}" />
                                    <Label Text="{Binding WeatherCondition, StringFormat='ÐŸÐ¾Ð³Ð¾Ð´Ð°: {0}'}"
                         FontSize="12"
                         TextColor="{DynamicResource TextColorSecondary}"
                         Margin="0,8,0,0" />
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
                <Button Text="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÑ‚ÐºÑƒ"
                CornerRadius="24"
                Style="{DynamicResource PrimaryButtonStyle}"
                Command="{Binding AddNoteCommand}" />

            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
