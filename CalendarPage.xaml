<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:WeatherApp.ViewModels"
    x:Class="WeatherApp.CalendarPage"
    Title="📆 Календарь заметок"
    BackgroundColor="{DynamicResource PageBackgroundColor}" >

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="{DynamicResource BackgroundGradientStart}" Offset="0" />
            <GradientStop Color="{DynamicResource BackgroundGradientEnd}"   Offset="1" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ScrollView>

        <VerticalStackLayout Padding="15" Spacing="15">

            <!-- Ваш контент: календарь и список заметок -->
            <VerticalStackLayout Padding="20" Spacing="15">

                <!-- Стилизованный фрейм с DatePicker -->
                <Frame Style="{DynamicResource WeatherFrameStyle}"
               CornerRadius="12"
               HasShadow="True">
                    <DatePicker Date="{Binding SelectedDate}"
                      HorizontalOptions="Center"
                      Format="dddd, dd MMM yyyy"
                      TextColor="{DynamicResource TextColorSecondary}"
                      FontSize="18" />
                </Frame>

                <!-- Заголовок блока заметок -->
                <Label Text="Заметки на выбранную дату"
               FontAttributes="Bold"
               FontSize="16"
               TextColor="{DynamicResource TextColorSecondary}" />

                <!-- Список заметок -->
                <CollectionView ItemsSource="{Binding Notes}"
                        EmptyView="Нет заметок на эту дату"
                        SelectionMode="None">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame Style="{DynamicResource WeatherFrameStyle}"
                     BackgroundColor="{DynamicResource FrameBackgroundColor}"
                     CornerRadius="8"
                     HasShadow="True"
                     Padding="12"
                     Margin="0,5">
                                <VerticalStackLayout>
                                    <Label Text="{Binding Title}"
                         FontAttributes="Bold"
                         FontSize="16"
                         TextColor="{DynamicResource TextColorPrimary}" />
                                    <Label Text="{Binding NoteText}"
                         FontSize="14"
                         LineBreakMode="WordWrap"
                         TextColor="{DynamicResource TextColorSecondary}" />
                                    <Label Text="{Binding WeatherCondition, StringFormat='Погода: {0}'}"
                         FontSize="12"
                         TextColor="{DynamicResource TextColorSecondary}"
                         Margin="0,8,0,0" />
                                </VerticalStackLayout>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Кнопка добавления -->
                <Button Text="➕ Добавить заметку"
                CornerRadius="24"
                Style="{DynamicResource PrimaryButtonStyle}"
                Command="{Binding AddNoteCommand}" />

            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
